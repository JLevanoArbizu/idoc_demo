<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <link rel="icon" href="../../resources/icon/iDoc.svg" sizes="32x32"/>
        <!--Other CSS and JS-->
        <h:outputStylesheet library="css"  name="materialize.min.css"/>
        <h:outputStylesheet library="css"  name="IconFontsMaterialize.css"/>
        <h:outputStylesheet library="css"  name="style.css"/>
        <h:outputScript library="js" name="jsfcrud.js" />
        <!--***-->
        <!--CSS and JS - Van en esta Posicion para que funcione bien-->
        <h:outputStylesheet library="css"  name="fontawesome-all.css"/>
        <h:outputStylesheet library="css"  name="charts.css"/>
        <h:outputStylesheet library="css"  name="clock.css"/>
        <h:outputStylesheet library="css"  name="components.css"/>
        <h:outputStylesheet library="css"  name="fileupload.css"/>
        <h:outputStylesheet library="css"  name="galleria.css"/>
        <h:outputStylesheet library="css"  name="inputswitch.css"/>
        <h:outputStylesheet library="css"  name="keyboard.css"/>
        <h:outputStylesheet library="css"  name="nanoscroller.css"/>
        <h:outputStylesheet library="css"  name="ripple.css"/>
        <h:outputStylesheet library="css"  name="schedule.css"/>
        <h:outputStylesheet library="css"  name="scrollpanel.css"/>
        <h:outputStylesheet library="css"  name="animate.css"/>
        <h:outputStylesheet library="css"  name="layout-dark-green.css"/>
        <h:outputStylesheet library="css"  name="theme-dark-green.css"/>
        <h:outputScript library="js" name="charts.js" />
        <h:outputScript library="js" name="components.js" />
        <h:outputScript library="js" name="core.js" />
        <h:outputScript library="js" name="inputswitch.js" />
        <h:outputScript library="js" name="keyboard.js" />
        <h:outputScript library="js" name="layout.js" />
        <h:outputScript library="js" name="moment.js" />
        <h:outputScript library="js" name="nanoscroller.js" />
        <h:outputScript library="js" name="raphael.js" />
        <h:outputScript library="js" name="ripple.js" />
        <h:outputScript library="js" name="schedule.js" />
        <h:outputScript library="js" name="scrollpanel.js" />
        <h:outputScript library="js" name="swipe.js" />
        <h:outputScript library="js" name="touchswipe.js" />   
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
        <h:outputScript library="js" name="plugins.js" />       
        <!--***-->        
        <title>#{tituloPagina} - iDoc</title>
        <style type="text/css">
            .main-content {
                padding: 0;
            }
        </style>
    </h:head>
    <h:body class="main-body">


        <div class="layout-wrapper menu-layout-static ">
            <!--==========================================
                      BARRA SUPERIOR
            ===========================================-->
            <div class="topbar clearfix">                

                <!--El resto de la Barra-->
                <div class="topbar-right">
                    <a id="menu-button" href="#">
                        <i class="material-icons">keyboard_arrow_left</i>
                    </a>

                    <a id="topbar-menu-button" href="#">
                        <i class="material-icons">more_vert</i>
                    </a>


                    <ul class="topbar-items fadeInDown animated">
                        <li>
                            <a href="#">
                                <i class="topbar-icon material-icons">settings</i>
                                <span class="topbar-item-name">Settings</span>
                            </a>
                            <ul class="ultima-menu animated">
                                <h:form>
                                    <li role="menuitem">
                                    <p:commandLink action="Ajustes" styleClass="ripplelink" ajax="true">
                                        <i class="material-icons">settings</i>
                                        <span>Ajustes</span>
                                    </p:commandLink>
                                    </li>
                                    <li role="menuitem">
                                    <p:commandLink action="Manual" styleClass="ripplelink" ajax="true">
                                        <i class="material-icons">assignment</i>
                                        <span>Manual</span>
                                    </p:commandLink>
                                    </li>
                                    <li role="menuitem">
                                    <p:commandLink action="Login" styleClass="ripplelink" ajax="true" onclick="cerrarSesion();"
                                                   actionListener="#{loginC.cerrarSesion()}">
                                        <i class="material-icons">lock</i>
                                        <span>Salir</span>
                                    </p:commandLink>
                                    </li>
                                </h:form>
                            </ul>
                        </li>
                        <li>
                            <!--                            <a href="#">
                                                            <i class="topbar-icon material-icons animated swing">message</i>
                                                            <span class="topbar-badge animated rubberBand">5</span>
                                                            <span class="topbar-item-name">Bandeja</span>
                                                        </a>-->
                            <!--                            <ul class="ultima-menu animated">
                                                            <li role="menuitem">
                                                                <a href="#" class="topbar-message">
                                                                    <span>Acta o Tr√°mite</span>
                                                                </a>
                                                            </li>
                                                        </ul>-->
                        </li>
                        <li>
                            <!--                            <a href="#">
                                                            <i class="topbar-icon material-icons">timer</i>
                                                            <span class="topbar-badge animated rubberBand">4</span>
                                                            <span class="topbar-item-name">Notifications</span>
                                                        </a>-->
                            <ul class="ultima-menu animated">
                                <li role="menuitem">
                                    <a href="#">
                                        <i class="material-icons">traffic</i>
                                        <span>Pending tasks</span>
                                    </a>
                                </li>
                                <li role="menuitem">
                                    <a href="#">
                                        <i class="material-icons">event</i>
                                        <span>Meeting today at 3pm</span>
                                    </a>
                                </li>
                                <li role="menuitem">
                                    <a href="#">
                                        <i class="material-icons">publish</i>
                                        <span>Download documents</span>
                                    </a>
                                </li>
                                <li role="menuitem">
                                    <a href="#">
                                        <i class="material-icons">flight</i>
                                        <span>Book flight</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="topbar-right">

                    <p:ajaxStatus>
                        <f:facet name="start">
                            <div class="progress">
                                <div class="indeterminate"></div>
                            </div>
                        </f:facet>
                    </p:ajaxStatus>
                </div>
            </div>

            <!--==========================================
                      MENU DE USUARIO
            ===========================================-->
            <h:form id="menuform">
                <div class="layout-menu layout-menu-slim">
                    <div class="nano has-scrollbar">
                        <div class="nano-content menu-scroll-content">
                            <div class="profile amber">
                                <div class="profile-image"></div>
                                <a id="profile-options" href="#">
                                    <h:outputText id="persona" styleClass="profile-name" 
                                                  value="#{loginC.loginSesion.trabajador.persona.NOMPER}"/>

                                    <p:tooltip for="persona" position="bottom">
                                        <h:panelGrid columns="2">
                                            <p:outputLabel value="Apellidos"/>
                                            <h:outputText value="#{loginC.loginSesion.trabajador.persona.APEPATPER} 
                                                          #{loginC.loginSesion.trabajador.persona.APEMATPER}"/>
                                            <p:outputLabel value="DNI"/>
                                            <h:outputText value="#{loginC.loginSesion.trabajador.persona.DNIPER}"/>
                                            <p:outputLabel value="√Årea"/>
                                            <h:outputText value="#{loginC.loginSesion.trabajador.area.NOMARE}"/>
                                        </h:panelGrid>
                                    </p:tooltip>
                                </a>
                            </div>

                            <ul id="menuform:submenu" class="ultima-menu nano">
                                <li role="menuitem">
                                <p:commandLink action="Home" ajax="true" styleClass="aumentar-sinSombra" >
                                    <i class="material-icons">dashboard</i>
                                    <span>Dashboard</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="Persona" ajax="true" styleClass="aumentar-sinSombra" >
                                    <i class="material-icons">group</i>
                                    <span>Ciudadanos</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="empresa" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'T'}">
                                    <i class="material-icons">account_balance</i>
                                    <span>Empresa</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="documentoTipo" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'T'}">
                                    <i class="material-icons">account_balance</i>
                                    <span>Tipo doc</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="Trabajador" styleClass="aumentar-sinSombra" id="trabajador"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(0) == 'S' 
                                                           or loginC.loginSesion.TIPLOG.charAt(0) == 'A'}" 
                                               ajax="true">
                                    <i class="material-icons">work</i>
                                    <span>Trabajadores</span>
                                </p:commandLink>
                                <p:tooltip for="trabajador" position="right">
                                    <h:panelGrid columns="1">
                                        <p:outputLabel value="Funcionarios/Colaboradores"/>
                                    </h:panelGrid>
                                </p:tooltip>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="documento" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'T'}">
                                    <i class="material-icons">description</i>
                                    <span>  Tr√°mite</span>
                                </p:commandLink>
                                </li>
                                <li role="menuitem">
                                <p:commandLink action="Transferencia" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'T'}">
                                    <i class="material-icons">compare_arrows</i>
                                    <span>Trazabilidad</span>
                                </p:commandLink>
                                </li>
                                <li role="menuitem">
                                <p:commandLink action="Bandeja" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'R'}">
                                    <i class="material-icons">compare_arrows</i>
                                    <span>Bandeja</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="Area" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(0) == 'S' 
                                                           and loginC.loginSesion.TIPLOG.charAt(1) == 'T'}" 
                                               ajax="true">
                                    <i class="material-icons">dashboard</i>
                                    <span>√Årea</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="Acta" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'R'}">
                                    <i class="material-icons">collections_bookmark</i>
                                    <span>Actas</span>
                                </p:commandLink>
                                </li>
                                <li role="menuitem">
                                <p:commandLink action="IncidenciaTipo" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(1) == 'R'}" ajax="true">
                                    <i class="material-icons">donut_small</i>
                                    <span>Tipos de Incidencia</span>
                                </p:commandLink>
                                </li>
                                <li role="menuitem">
                                <p:commandLink action="tupa" ajax="true" styleClass="aumentar-sinSombra"
                                               rendered="#{loginC.loginSesion.TIPLOG.charAt(0) == 'S' 
                                                           and loginC.loginSesion.TIPLOG.charAt(1) == 'T'}">
                                    <i class="material-icons">import_contacts</i>
                                    <span>Tupa</span>
                                </p:commandLink>
                                </li>

                                <li role="menuitem">
                                <p:commandLink action="Sugerencias" ajax="true" styleClass="aumentar-sinSombra">
                                    <i class="material-icons">comment</i>
                                    <span>Sugerencias</span>
                                </p:commandLink>
                                </li>
                            </ul>
                            <script>
                                PrimeFaces.cw("Ultima", "me", {id: "menuform"});
                            </script>
                        </div>
                    </div>
                </div>
            </h:form>

            <!--==========================================
                              CONTENIDO
            ===========================================-->
            <div class="layout-main">
                <h:form>
                    <p:idleMonitor timeout="999999999">
                        <p:ajax event="idle" listener="#{loginC.cerrarSesion()}" />
                    </p:idleMonitor>
                </h:form>
                <p:growl widgetVar="mensajeSockets" life="1000" showDetail="true" globalOnly="true"/>
                <h:form>
                    <p:commandButton id="btnActualizarPersona" update="#{formsActualizar}" oncomplete="PF('wvDtTblPersona').filter();"
                                     value="btnActualizarPersona" immediate="true" async="true" style="display: none;"
                                     actionListener="#{personaC.listar()}" />
                    <p:commandButton id="btnActualizarArea" oncomplete="PF('wvListaArea').filter();"
                                     value="btnActualizarArea" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{areaC.listar()}" />
                    <p:commandButton id="btnActualizarActa" oncomplete="PF('wvTblActa').filter();"
                                     value="btnActualizarActa" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{actaC.listar()}" />
                    <p:commandButton id="btnActualizarIncidenciaTipo" oncomplete="PF('wvDtTblIncidenciaTipo').filter();"
                                     value="btnActualizarIncidenciaTipo" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{incidenciatipoC.listar()}" />
                    <p:commandButton id="btnActualizarDocumento"
                                     value="btnActualizarDocumento" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{documentoC.listarDocumento()}" />
                    <p:commandButton id="btnActualizarTrabajador" oncomplete="PF('wdtTblTrabajador').filter();"
                                     value="btnActualizarTrabajador" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{trabajadorC.listar()}" />
                    <p:commandButton id="btnActualizarTransferencia"
                                     value="btnActualizarTransferencia" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{transferenciaC.listarTransferencia()}" />
                    <p:commandButton id="btnActualizarEmpresa"
                                     value="btnActualizarEmpresa" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{empresaC.listarEmpresa()}" />
                    <p:commandButton id="btnActualizarTupa" oncomplete="PF('wvTblTupa').filter();"
                                     value="btnActualizarTupa" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{tupaC.listarTupa()}" />
                    <p:commandButton id="btnActualizarSugerencia"
                                     value="btnActualizarSugerencia" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{sugerenciaC.listar()}" />
                    <p:commandButton id="btnActualizarDocumentoTipo"
                                     value="btnActualizarDocumentoTipo" immediate="true" async="true" update="#{formsActualizar}" style="display: none;"
                                     actionListener="#{documentoTipoC.listarDocTipo()}" />
                    <p:commandButton id="btnActualizarBandeja"
                                     value="btnActualizarBandeja" immediate="true" async="true" update="#{formsActualizar}"
                                     actionListener="#{transferenciaC.listarBandeja()}" />
                </h:form>
                <ui:insert name="contenidoPagina"/>
                <div class="footer">
                    <div class="card clearfix">
                        <span class="footer-text-left">Valle Grande</span>
                        <span class="footer-text-right">
                            <span class="ui-icon ui-icon-copyright"></span>  
                            <span>Todos los Derechos Reservados.</span>
                        </span>
                    </div>
                </div>
            </div>

        </div>
        <h:outputScript library="js" name="websocket.js" />
    </h:body>
</html>

